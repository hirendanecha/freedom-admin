<c-card class="mb-3">
  <c-card-header>Users</c-card-header>

  <c-card-body>
    <c-row class="pb-3">
      <c-col xs="3">
        <input cFormControl placeholder="Search..." name="search" [formControl]="searchCtrl" />
      </c-col>
    </c-row>

    <app-table>
      <thead cTableColor="light">
        <tr class="text-center">
          <th class="text-center">Id</th>
          <th>Username</th>
          <th>Email</th>
          <th>AccountType</th>
          <th>DateCreation</th>
          <th>Status</th>
          <th>Suspended</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <tr class="text-center" *ngFor="let user of userData; let i = index">
          <td>
            {{ user.Id }}
          </td>
          <td>{{ user.Username }}</td>
          <td>
            {{ user.Email }}
          </td>
          <td>
            {{ user.AccountType }}
          </td>
          <td>{{ user.DateCreation | date : "d-MM-YYYY" }}</td>
          <td>
            <ng-container *ngIf="user.IsActive === 'Y'">
              <c-badge color="success" (click)="changeIsActiveStatus(user.Id, 'N')">Active</c-badge>
            </ng-container>
            <ng-container *ngIf="user.IsActive === 'N'">
              <c-badge color="danger" (click)="changeIsActiveStatus(user.Id, 'Y')">DeActive</c-badge>
            </ng-container>
          </td>
          <td>
            <ng-container *ngIf="user.IsSuspended === 'Y'">
              <c-badge color="warning" (click)="suspendUser(user.Id, 'N')">Yes</c-badge>
            </ng-container>
            <ng-container *ngIf="user.IsSuspended === 'N'">
              <c-badge color="info" (click)="suspendUser(user.Id, 'Y')">No</c-badge>
            </ng-container>
          </td>
          <td>
            <button class="bg-transparent border-0" size="sm" (click)="openEditUserPopup(user.Id)">
              <svg cIcon name="cilPencil" size="md"></svg>
            </button>

            <button class="bg-transparent border-0" size="sm" (click)="deleteUser(user.Id)">
              <svg cIcon name="cil-trash" size="md"></svg>
            </button>
          </td>
        </tr>
      </tbody>
    </app-table>

    <app-pagination [items]="pagination?.totalItems" (onPageChange)="onPageChange($event)" />
  </c-card-body>
</c-card>

<c-toaster [placement]="'top-end'" class="p-3" position="fixed">
  <c-toast (timer)="onTimerChange($event)" (visibleChange)="onVisibleChange($event)" [visible]="visible"
    class="text-bg-{{ type }}">
    <c-toast-header>
      <toast-sample-icon></toast-sample-icon>
    </c-toast-header>
    <c-toast-body>
      <p class="text-white">{{ message }}</p>
      <c-progress thin>
        <c-progress-bar [value]="percentage"></c-progress-bar>
      </c-progress>
    </c-toast-body>
  </c-toast>
</c-toaster>
